/****************************************************************************
 *
 *   Copyright (C) 2013 PX4 Development Team. All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions
 * are met:
 *
 * 1. Redistributions of source code must retain the above copyright
 *    notice, this list of conditions and the following disclaimer.
 * 2. Redistributions in binary form must reproduce the above copyright
 *    notice, this list of conditions and the following disclaimer in
 *    the documentation and/or other materials provided with the
 *    distribution.
 * 3. Neither the name PX4 nor the names of its contributors may be
 *    used to endorse or promote products derived from this software
 *    without specific prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
 * "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
 * LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS
 * FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE
 * COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT,
 * INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING,
 * BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS
 * OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED
 * AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT
 * LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN
 * ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE
 * POSSIBILITY OF SUCH DAMAGE.
 *
 ****************************************************************************/

/**
 * @file Inertial measurement unit driver interface.
 */

#ifndef _DRV_MHP_H
#define _DRV_MHP_H

#include <stdint.h>
#include <sys/ioctl.h>

#include "drv_sensor.h"
#include "drv_orb_dev.h"

#define MHP_BASE_DEVICE_PATH	"/dev/mhp"
#define MHP0_DEVICE_PATH	"/dev/mhp0"

#define poly_order 12

const double cp_par = 1005.0; // specific heat capacity air (at const. pressure)
const double cv_par = 717.0 ; // specific heat capacity air (at const. volume)

const double poly_alpha[144] = {-0.337436488399,20.6130170641,1.30395264072,-6.64859782488,-1.45900099222,4.52732762779,0.658812379695,-1.69516986395,-0.125618381547,0.291187748833,0.00845627900752,-0.0183203130763,-2.33579691619,2.20564071583,3.52970878956,-4.78062365199,-3.91369609837,4.31039956374,1.79521364198,-1.67046835999,-0.349273627563,0.286848306599,0.0240172825508,-0.0179583955783,0.17056317682,-10.2526076831,-3.09125289517,24.1176195389,4.47090399679,-21.864411706,-2.19670998495,8.46685521735,0.435093226025,-1.44561480121,-0.0297944715388,0.0896093418177,2.25301233535,-5.48860391485,-9.37294582083,15.2753995405,11.1793682393,-13.7533471749,-5.21389295721,5.24584053983,1.01958641081,-0.886136416667,-0.0700230104009,0.0545913298816,-0.220018733987,9.80665091973,3.39927354461,-28.5055588528,-5.042236043,25.9452547819,2.50538067496,-9.82833824049,-0.497882964518,1.62605188277,0.033958910494,-0.0970275635284,-1.69939361146,5.06400676445,8.27691516656,-14.5600368069,-9.96687522216,12.9646520582,4.63093834158,-4.85108564137,-0.891875618921,0.801955018288,0.0596548867573,-0.0482814346675,0.116294745176,-4.48804023846,-1.65444594405,13.1288834224,2.44629453788,-11.6579850688,-1.21348972876,4.2448149316,0.240443679815,-0.666010576329,-0.0162567469193,0.0372137265525,0.614152437473,-2.04377709326,-3.19198208434,5.83650702236,3.82893827018,-5.1079836727,-1.76424931153,1.86881858168,0.331062265087,-0.302300952813,-0.0211673051779,0.0178332207548,-0.0253368442602,0.875034777067,0.352083025418,-2.52997668636,-0.521754468433,2.1808893308,0.25922504466,-0.75702759227,-0.0515647687636,0.111385674637,0.00347252822495,-0.00577901151517,-0.101314290907,0.365864508999,0.555048249424,-1.03443298907,-0.661046152863,0.891780524037,0.300438145293,-0.320773403659,-0.0537920384257,0.0514455444048,0.00317101842589,-0.00302335289292,0.00192397943554,-0.0602353451692,-0.0266445437721,0.171581524631,0.0397492066252,-0.143207444032,-0.0197579679134,0.0471541661731,0.00391987781876,-0.00649985762149,-0.000253293584088,0.000321919937291,0.00616873956903,-0.0238410771732,-0.0355157113773,0.0667233958924,0.0419246756369,-0.0567319941281,-0.0186832028229,0.0200986296503,0.00312036605781,-0.00319746060258,-0.000167897704815,0.000181465941536};
const double poly_beta[144] = {1.62502303016,-1.91370660442,-0.827500174249,1.5724804495,1.20169819482,-1.20657530938,-0.577963300522,0.438023024405,0.113012166361,-0.0721394509164,-0.00771720717898,0.00437290833834,-19.8143854018,-1.58443845552,9.63894266336,4.84988071487,-9.4666363809,-4.58108457303,4.24506782517,1.82112830781,-0.809069937959,-0.318692468481,0.0544247788023,0.0202393338162,-1.91148694753,1.26856991225,6.23012116482,-3.18041681591,-7.5954196958,2.8397940303,3.4831460411,-1.13280386511,-0.662779242853,0.199664630933,0.0442315998919,-0.0127920149449,6.37813121135,3.82984053146,-23.6713853202,-13.0362040756,27.2972469683,12.5009659739,-12.2218858272,-4.98562688335,2.27911532765,0.870142739152,-0.149078668099,-0.0548359175244,1.64610636474,-1.17169089529,-7.84106073793,3.03040329003,9.48926962515,-2.68015109417,-4.20279111856,1.10471839473,0.767779661464,-0.198671960425,-0.048887266405,0.0129375593574,-4.52967292441,-3.7691879285,21.2577357223,12.2659419214,-24.2757905714,-11.5571969088,10.4899452043,4.5366028213,-1.85898619225,-0.775543922514,0.114039844614,0.047528917571,-0.712021950473,0.505677257099,3.64289416391,-1.3678470693,-4.29710236776,1.28033843575,1.80748300128,-0.57028777212,-0.311029272891,0.106537742221,0.0184401294847,-0.00718060056502,1.68856298775,1.5444173087,-8.04710365965,-4.90585922541,8.87454657538,4.52886980634,-3.60775414848,-1.73315086723,0.581768630787,0.28595185421,-0.0312930940349,-0.0166783336005,0.130995788673,-0.0925817016605,-0.693401367347,0.272089964438,0.796268513857,-0.271042478351,-0.316773355599,0.125087243292,0.0518204416059,-0.0222723271818,-0.00292060261225,0.00145468368556,-0.28633864152,-0.27424062127,1.33714566821,0.862589308626,-1.40205606931,-0.780153475857,0.520280428675,0.28990951938,-0.0716308806725,-0.0459321861603,0.00299329571672,0.0025237544491,-0.00837899257541,0.00607162988024,0.0457741303212,-0.0194403667893,-0.051222126033,0.0204883761087,0.019218827933,-0.00968902894981,-0.00302754151599,0.00169056818335,0.000155538897234,-0.000137780304803,0.0178029535451,0.0175417897802,-0.0805697369473,-0.0549079947399,0.0791511336392,0.048549825603,-0.025786166317,-0.0174086084337,0.00270227205163,0.00261034310569,-6.13571671586e-05,-0.000126284946989};
const double poly_kp[144] = {-0.151923603218,-0.151172414149,-0.147472936411,-0.148206557428,-0.14884418256,-0.148159859578,-0.147574109642,-0.147334370269,-0.147550223283,-0.147837166206,-0.145731366254,-0.144221969298,-0.142379028806,-0.140482111799,-0.140804618283,-0.1414573495,-0.139690260357,-0.138428879164,-0.138781163254,-0.135303461124,-0.134105834393,-0.146679259425,-0.163180571774,-0.164950678235,-0.16399734929,-0.16618954386,-0.162940187503,-0.159959729538,-0.159896458077,-0.16247033954,-0.165854687101,-0.16835373662,-0.169925448626,-0.171671036461,-0.172365118791,-0.172314440582,-0.172765968449,-0.171662336655,-0.172708191788,-0.171513463709,-0.173959520956,-0.174083349552,-0.175030587131,-0.176467020783,-0.176860716009,-0.175259376057,-0.17575496956,-0.174696851057,-0.174680570742,-0.17618332202,-0.176154020292,-0.175894297005,-0.179675015203,-0.178845416927,-0.179648934377,-0.179180357683,-0.180469452661,-0.154052073288,-0.15393267971,-0.152945888388,-0.153829152393,-0.153310247321,-0.154283512355,-0.152605403295,-0.153076638144,-0.154983264139,-0.153900237945,-0.152417640243,-0.153519931056,-0.15244277083,-0.151709394828,-0.151111551922,-0.152445521081,-0.152142615449,-0.164080307482,-0.158283005122,-0.150041671966,-0.15012969105,-0.14751530152,-0.148115832894,-0.149499689382,-0.167670048315,-0.175429552269,-0.174924617024,-0.176631275126,-0.178205917563,-0.17689959021,-0.177820575684,-0.177682591699,-0.177559849642,-0.178157411485,-0.18010637322,-0.179697724477,-0.180151190898,-0.180773741249,-0.182037924808,-0.182084600356,-0.18027330558,-0.179175223229,-0.179492108653,-0.180045556449,-0.180852857767,-0.181877656367,-0.18038735487,-0.183036231418,-0.183729088971,-0.184466318688,-0.183107266645,-0.183720124697,-0.186943487204,-0.183385724615,-0.186430593357,-0.188644667535,-0.185669227016,-0.183843930506,-0.185391177998,-0.185774480239,-0.184480261531,-0.183512674132,-0.182436727426,-0.183817520114,-0.182948892632,-0.18223004054,-0.183367420879,-0.181887769518,-0.181428246022,-0.181078912297,-0.179722289249,-0.180701154114,-0.18098271513,-0.180152346799,-0.180494220343,-0.180540682638,-0.181959851083,-0.181591426532,-0.182352104454,-0.181435683975,-0.181068915969,-0.182291602927,-0.181343657293,-0.183119614628,-0.182609649194,-0.182903923167,-0.181204980585};
const double poly_kq[144] = {-0.0339877332188,-0.0327077017193,-0.0357978351474,-0.0339615770787,-0.033694445002,-0.0344506555608,-0.035302093763,-0.0348990799117,-0.034169529709,-0.0361349737527,-0.0353874379555,-0.0348921085758,-0.0358166320075,-0.0352823135928,-0.0343565380614,-0.0350252639611,-0.0349841667547,-0.0348009109259,-0.0336324346394,-0.0360434554783,-0.0344198248525,-0.0354583921364,-0.0352374060735,-0.0348841750924,-0.0343058569358,-0.0366832556959,-0.0374699533415,-0.0349122625416,-0.0346126197874,-0.0351519069091,-0.0329960383689,-0.0356045011672,-0.0344000376351,-0.0347698782635,-0.0345099834262,-0.0365891329116,-0.0349992601095,-0.0357213543006,-0.0356246288293,-0.034855709241,-0.0340580899972,-0.0360364303791,-0.0348074979169,-0.0330879811579,-0.0337813498754,-0.0357853949213,-0.0345441216394,-0.0359838408618,-0.0347480049684,-0.0347991933905,-0.0352284118738,-0.0345180098275,-0.0323423257816,-0.0325107953566,-0.0347342850446,-0.0324953972886,-0.0314972637635,-0.0322887048303,-0.0318024151569,-0.0344730496902,-0.0333925375048,-0.0364917886474,-0.0339412554716,-0.0353035583851,-0.0355140678821,-0.0340468786372,-0.0338495228316,-0.0335983369693,-0.0348610030748,-0.0344234430105,-0.0337409466796,-0.0346681834048,-0.0327976897659,-0.0346227154185,-0.0348033477509,-0.0328956335376,-0.0331859140128,-0.0368351398518,-0.0359681415854,-0.0345214265043,-0.0345060342173,-0.0325689286129,-0.035833563653,-0.0349618895936,-0.0348270026051,-0.0313865128625,-0.0333332776824,-0.0336218951219,-0.0325749786241,-0.0334300988178,-0.0338715429016,-0.0346749499237,-0.0325833234381,-0.0343163053452,-0.0322637958132,-0.0332680679754,-0.0330449823109,-0.0323879955388,-0.0339503977085,-0.0343189221653,-0.0330124268205,-0.0334522808104,-0.0335305906265,-0.0339407237827,-0.0297374865587,-0.0301467711325,-0.0302578759886,-0.0295834233101,-0.0310876857711,-0.0311414016159,-0.0316687864817,-0.030176016544,-0.0303292188141,-0.0310506153773,-0.0300813582639,-0.0313408857965,-0.0304703622345,-0.0315796750537,-0.0298361321431,-0.0301332565494,-0.0302156511379,-0.0311567077421,-0.0311832476289,-0.0318323113693,-0.0335372948038,-0.0324387204723,-0.0326186447434,-0.0314260646827,-0.0321181862056,-0.0328484522205,-0.0321315525335,-0.0320727987748,-0.0323169151551,-0.0317039230672,-0.0325535087761,-0.0324475103728,-0.0340281606294,-0.0338894501333,-0.0323736821428,-0.0326044391332,-0.0298379617171,-0.0315819867724,-0.032272666293,-0.0322105587283};


#endif /* _DRV_MHP_H */
